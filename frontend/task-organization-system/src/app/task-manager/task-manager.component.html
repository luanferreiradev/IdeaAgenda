<div class="container mx-auto p-4 max-w-xl">
  <h1 class="text-2xl font-bold mb-4">Agenda de Compromissos</h1>

  <!-- Formulário para criar/atualizar agendamento -->
  <form (ngSubmit)="handleSubmit()" class="mb-4 bg-white p-4 rounded shadow">
    <div class="flex flex-col gap-2">
      <input
        type="text"
        [(ngModel)]="task.title"
        name="title"
        placeholder="Título do compromisso"
        class="border rounded p-2"
        required
      />
      <button
        type="submit"
        class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"
      >
        {{ task.id ? 'Atualizar compromisso' : 'Agendar compromisso' }}
      </button>
      <button
        *ngIf="task.id"
        type="button"
        (click)="task = {}"
        class="bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400"
      >
        Cancelar edição
      </button>
    </div>
  </form>

  <!-- Lista de agendamentos -->
  <ul class="space-y-2">
    <li
      *ngFor="let task of tasks"
      class="flex justify-between items-center border p-2 rounded bg-white shadow"
    >
      <span>{{ task.title }}</span>
      <div class="flex gap-2">
        <button
          (click)="editTask(task)"
          class="bg-yellow-500 text-white px-2 py-1 rounded hover:bg-yellow-600"
        >
          Editar
        </button>
        <button
          (click)="deleteTask(task.id)"
          class="bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600"
        >
          Excluir
        </button>
      </div>
    </li>
  </ul>
</div>

<script>
  async function fetchGitHubStars() {
    const url = 'https://api.github.com/repos/luanferreiradev/IdeaAgenda';
    try {
      const response = await fetch(url);
      if (!response.ok) throw new Error('Erro ao buscar dados do GitHub');
      const data = await response.json();
      const stars = data.stargazers_count || 0;
      document.getElementById('github-stars').textContent = stars;
    } catch (error) {
      console.error('Erro ao buscar estrelas do GitHub:', error);
    }
  }

  // Chama a função ao carregar a página
  fetchGitHubStars();
</script>
